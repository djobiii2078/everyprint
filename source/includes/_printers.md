# Printers

A printer represent the entity in charge of treating commands. He has a balance and can decide to retrieve his balance at any moment.

## Save a printer

This endpoint enable the a printer to be saved in our database. We need the name of the printer's service, his mobile number and his financial allocation, his service location and his work schedules.

### HTTP Request

> To test  :

```ruby
require 'kittn'

api = Kittn::APIClient.authorize!('meowmeowmeow')
```

```python
import kittn

api = kittn.authorize('meowmeowmeow')
```

```shell
# With shell, you can just pass the correct header with each request
curl
	-d
    "name='LE PARRAIN'&
    financial_allocation='{
        "A4":
        {
            "gray": 10,
            "color": 25
          },
        "A3":
        {
          "gray":25,
         "color":50
       },
        "rayure":250,
         "certdeau":110
       }'
         &position=' {
           "name": "Grand Hyatt",
           "location": [25.2285, 55.3273]
         }'
         &schedules='{
           "open": "7:30",
           "close":"20:00"
         }'&number='677378688'}&master_pass='xxxx524PO'"

	-X POST
	"http://3islabs.com/everyprint/api/printer/save"

```

```javascript
$.POST{}

let api = kittn.authorize('meowmeowmeow');
```

`POST data http://3islabs.com/everyprint/api/printer/save`


### Query Parameters

Parameter | Validation | Description
--------- | ---------- | -----------
name | alphanumeric string | Printer service name
financial_allocation | json_string  | The printer's allocation for command treatment : `{"A4":{"gray": 10,"color": 25}, "A3":{"gray":25, "color":50}, "rayure":250, "certdeau":"110"}`
position | geojson string | His location given by google maps or open street map
schedules | json_string | His working schedules `{"open":"7:30", "close":"20:00"}`
number | telephone number (+237) | His telephone number needed for balance operations
master_pass | alphanumeric string | A hash of the password to store (we do not store the master_pass in clear)

> The above command should return :

```json
{
  "printer_id" : "EEX",
  "return_code" : "111"
}
```
<aside class="notice">
Return autogenerated id for the new printer
</aside>
<aside class="warning">
Not yet implemented !!!!!
</aside>
## Get a printer's balance

This endpoint enable us to retrieve the balance for a given printers. Here we only retrieve it, we don't remove it from his account. To remove from the account see section `Transfer printer's balance`.

### HTTP Request
> To test  :

```ruby
require 'kittn'

api = Kittn::APIClient.authorize!('meowmeowmeow')
```

```python
import kittn

api = kittn.authorize('meowmeowmeow')
```

```shell
# With shell, you can just pass the correct header with each request
curl
	-d
    "printer_id='EEX'"
	-X GET
	"http://3islabs.com/everyprint/api/printer/balance/get"

```

```javascript
$.POST{}

let api = kittn.authorize('meowmeowmeow');
```

`GET data http://3islabs.com/everyprint/api/printer/balance/get`

### Query Parameters

Parameter | Validation | Description
--------- | ---------- | -----------
printer_id | alphanumeric string | Printers id obtained during registration


> The above command should return :

```json
{
  "balance" : "5000",
  "return_code" : "111"
}
```

<aside class="notice">
  The balance currency is in XOF.
</aside>
<aside class="warning">
Not yet implemented !!!!!
</aside>
## Transfer printer's balance
Here we transfer the actual balance present in the printer's account telephone number.
### HTTP Request
> To test  :

```ruby
require 'kittn'

api = Kittn::APIClient.authorize!('meowmeowmeow')
```

```python
import kittn

api = kittn.authorize('meowmeowmeow')
```

```shell
# With shell, you can just pass the correct header with each request
curl
	-d
    "printer_id='EEX'&master_pass='dfskx85sdsfs'"
	-X POST
	"http://3islabs.com/everyprint/api/printer/balance/transfer"

```

```javascript
$.POST{}

let api = kittn.authorize('meowmeowmeow');
```

`POST data http://3islabs.com/everyprint/api/printer/balance/transfer`

### Query Parameters

Parameter | Validation | Description
--------- | ---------- | -----------
printer_id | alphanumeric string | Printers id obtained during registration
master_pass | alphanumeric string  | Hash of the master_pass entered by user to compare with the hash stored


> The above command should return :

```json
{
  "return_code" : "111"
}
```
<aside class="warning">
Not yet implemented !!!!!
</aside>

## Transfer history
This is the endpoint that enables us to retrieve the printer's balance transfer history.

### HTTP Request

> To test  :

```ruby
require 'kittn'

api = Kittn::APIClient.authorize!('meowmeowmeow')
```

```python
import kittn

api = kittn.authorize('meowmeowmeow')
```

```shell
# With shell, you can just pass the correct header with each request
curl
	-d
    "printer_id='EEX'&since=3"
	-X GET
	"http://3islabs.com/everyprint/api/printer/balance/history"

```

```javascript
$.POST{}

let api = kittn.authorize('meowmeowmeow');
```

`GET data http://3islabs.com/everyprint/api/printer/balance/history`

### Query Parameters

Parameter | Validation | Description
--------- | ---------- | -----------
printer_id | alphanumeric string | Printers id obtained during registration
since | int  | How far in days, should we retrieve the balance transfer history


> The above command should return :

```json
{
  "history": {
                "date_time" :
                    {
                      "datetime": "12/01/2018 00:00:00",
                      "balance" : 5000
                    },
               "date_time" : {
                      "datetime" : "11/01/2018 17:40:00",
                      "balance" : 5300
               },
               "date_time" : {
                      "datetime": "10/01/2018 02:00:00",
                      "balance" : 3300
               }
            },

  "return_code" : "111"
}
```
<aside class="warning">
  Not yet implemented !!!!!
</aside>

## Balance per day history / nÂ° commands

This is the endpoint that enables us to retrieve the printer's sales details per day.

### HTTP Request

> To test  :

```ruby
require 'kittn'

api = Kittn::APIClient.authorize!('meowmeowmeow')
```

```python
import kittn

api = kittn.authorize('meowmeowmeow')
```

```shell
# With shell, you can just pass the correct header with each request
curl
	-d
    "printer_id='EEX'&since=3"
	-X GET
	"http://3islabs.com/everyprint/api/printer/sales/history"

```

```javascript
$.POST{}

let api = kittn.authorize('meowmeowmeow');
```

`GET data http://3islabs.com/everyprint/api/printer/sales/history`

### Query Parameters

Parameter | Validation | Description
--------- | ---------- | -----------
printer_id | alphanumeric string | Printers id obtained during registration
since | int  | How far in days, should we retrieve the sales details


> The above command should return :

```json
{
  "history": {
                    {
                      "date": "12/01/2018",
                      "balance" : 5000,
                      "commands_done" : 100
                    },
                    {
                      "date" : "11/01/2018",
                      "balance" : 5300,
                      "commands_done" : 80
                    },
                    {
                      "date": "10/01/2018",
                      "balance" : 3300,
                      "commands_done" : 1
                    }
            },

  "return_code" : "111"
}
```
<aside class="warning">
  Not yet implemented !!!!!
</aside>
